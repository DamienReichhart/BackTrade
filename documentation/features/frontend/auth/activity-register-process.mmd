flowchart TD
    Start([User navigates to register page]) --> RenderForm[Render RegisterFormPanel]
    RenderForm --> UserInput[User enters name, email, passwords, accepts terms]
    
    UserInput --> ValidateName{Name valid?}
    ValidateName -->|No| ShowNameError[Display name validation error]
    ShowNameError --> UserInput
    
    ValidateName -->|Yes| ValidateEmail{Email valid?}
    ValidateEmail -->|No| ShowEmailError[Display email validation error]
    ShowEmailError --> UserInput
    
    ValidateEmail -->|Yes| ValidatePassword{Password valid?}
    ValidatePassword -->|No| ShowPasswordError[Display password validation error]
    ShowPasswordError --> UserInput
    
    ValidatePassword -->|Yes| ValidateConfirm{Passwords match?}
    ValidateConfirm -->|No| ShowConfirmError[Display password match error]
    ShowConfirmError --> UserInput
    
    ValidateConfirm -->|Yes| CheckTerms{Terms accepted?}
    CheckTerms -->|No| PreventSubmit[Prevent form submission]
    PreventSubmit --> UserInput
    
    CheckTerms -->|Yes| UserSubmit[User clicks Create account button]
    UserSubmit --> FinalValidation[Final form validation]
    
    FinalValidation --> ValidationCheck{All fields valid?}
    ValidationCheck -->|No| ShowErrors[Display validation errors]
    ShowErrors --> UserInput
    
    ValidationCheck -->|Yes| CallAPI[POST /auth/register<br/>{ email, password, confirmPassword }]
    
    CallAPI --> APICheck{API Response?}
    
    APICheck -->|201 Created| ExtractTokens[Extract accessToken and refreshToken]
    ExtractTokens --> StoreTokens[Store tokens in cookies]
    StoreTokens --> DecodeToken[Decode JWT to get user info]
    DecodeToken --> UpdateStore[Update AuthStore with tokens and user]
    UpdateStore --> NavigateDashboard[Navigate to /dashboard]
    NavigateDashboard --> End([User authenticated])
    
    APICheck -->|409 Conflict<br/>Email exists| ShowEmailExistsError[Display email already registered error]
    ShowEmailExistsError --> UserInput
    
    APICheck -->|400 Bad Request<br/>Validation error| ShowValidationError[Display validation error]
    ShowValidationError --> UserInput
    
    APICheck -->|Network Error| ShowNetworkError[Display network error]
    ShowNetworkError --> UserInput
    
    style Start fill:#e1f5ff
    style End fill:#c8e6c9
    style ShowNameError fill:#fff3e0
    style ShowEmailError fill:#fff3e0
    style ShowPasswordError fill:#fff3e0
    style ShowConfirmError fill:#fff3e0
    style ShowEmailExistsError fill:#ffcdd2
    style ShowValidationError fill:#ffcdd2
    style ShowNetworkError fill:#ffcdd2
    style StoreTokens fill:#e8f5e9
    style UpdateStore fill:#e8f5e9

